![图片](https://mmbiz.qpic.cn/mmbiz_jpg/SAy0yVjKWyy28vYIOjCOcicjabxanTeWW3NicIDDRiabbsDtY5XFyGfAIhRgdn16AgTC1mtM7neAB8nLmmsBGQzyQ/640?wx_fmt=jpeg&wxfrom=5&wx_lazy=1&wx_co=1)

正则表达式是一个特殊的字符串序列、一种模式，用来判断字符串是否符合这种模式，如：判断邮件地址是否有 `@` 符号，判断手机号是否正确等待。

基本语法
----

在正则表达式中，可以使用 `\d` 匹配数字，`\w` 匹配数字和子母，`.` 可以匹配除了换行符之外的任意字符，`\s` 匹配空白字符

`1\d` 可以匹配 `12`、`13`

`a\w` 可以匹配 `ab`、`ac`

`.abc` 可以匹配 `aabc`、`~abc`、`abc`

上面是单个字符匹配，要匹配长字符串在正则表达式中，用 `+` 表示匹配至少一个字符，用 `?` 表示匹配0或1个字符，用 `{n}` 表示匹配n个字符，用 `{n,m}` 表示匹配n-m个字符

`test.+` 可以匹配 `testPython`、`testPy`，无法匹配 `test`

`test?` 可以匹配 `tes`、`test`，无法匹配 `testPython`

`test.{6}` 可以匹配 `testPython`，无法匹配 `testPy`

`test.{1,6}` 可以匹配 `testPython`、`testPy`，无法匹配 `test`

复杂的正则
-----

正则表达式可以更加的复杂：`([A-Za-z0-9_\-\.]+)\@([A-Za-z0-9_\-\.]+)\.([A-Za-z]{2,4})`

( )：表示分组

\[ \]：表示在\[ \]内的任意一个字符

(\[A-Za-z0-9\_-.\]+)：表示以大写字母 \[A-Z\]、小写字母 \[a-z\]、数字 \[0-9\]、下划线 \[\_\]、减号 \[-\]、点号 \[.\] 中的至少一个字符 \[+\] ，在正则表达式中减号 \[-\] 和点号 \[.\] 是特殊字符需要使用 \[\] 转义

@：邮件中的@符号

(\[A-Za-z0-9\_-.\]+)：表示以大写字母 \[A-Z\]、小写字母 \[a-z\]、数字 \[0-9\]、下划线 \[\_\]、减号 \[-\]、点号 \[.\] 中的至少一个字符 \[+\]，如：qq，sina

.(\[A-Za-z\]{2,4})：表示以点号 \[.\] 连接2-4 \[{2,4}\] 个字符的大写字母 \[A-Z\] 和小写字母 \[a-z\]

`([A-Za-z0-9_\-\.]+)\@([A-Za-z0-9_\-\.]+)\.([A-Za-z]{2,4})`可以匹配 `abc@qq.com`、 `ABCabc1234@qq.com`、 `abc_123-xyz@sina.cn`

Python中的正则表达式
-------------

### 匹配

在Python中提供了包含了所有正则表达式功能的 `re` 模块，用 `re` 中的`match()`函数判断是否匹配成功，如果匹配成功则返回 `Match` 对象，否则返回 `None` ，在 Python 中字符串用 `\` 转义，使用 `r` 前缀可以不用考虑转义的问题

```
>>> import re
```

### 分组

在爬虫中一般需要提取出匹配成功的子字符串。用 ( ) 分组就可以提取出子字符串比如上面的邮件正则表达式，在Python中使用 `Match` 对象的 `group()` 函数提取出子字符串，`groups()` 函数返回所有子字符串的元组

`([A-Za-z0-9_\-\.]+)\@([A-Za-z0-9_\-\.]+)\.([A-Za-z]{2,4})` 定义了3个组，可以提取出 @ 符之前的字符串和域名

```
>>> email = re.match(r'([A-Za-z0-9_\-\.]+)\@([A-Za-z0-9_\-\.]+)\.([A-Za-z]{2,4})', 'abc@qq.com')
```

在 `group()` 函数中`group(0)`永远是字符串本身，`group(1)`、`group(2)`、`group(3)` ...表示第一、第二、第三...个子字符串。

### 替换

`re` 模块中提供了 `sub()` 函数替换子字符串的内容

```
# 删除字符串中的空格
```

`sub()` 函数中被替换的字符串也可以使用函数

```
import re
```

### 编译

在使用 `re` 模块的时候，Python 帮我们做了两件事：

1.  编译正则表达式，如果正则表示不合法会报错
    
2.  用编译后的正则表示匹配字符串
    

`re` 模块中可以使用 `compile()` 函数预编译正则表示

```
>>> import re
```

`compile()` 函数构造出来的是一个 `Pattern` 对象。提供了一些属性读取正则表达的相关信息。

1.  pattern：编译的正则表达式
    
2.  groups：表达式中的分组数量
    
3.  flags：编译时的匹配模式
    

```
>>> test = re.compile(r'test(.{1,6})')
```

总结
--

正则表达式非常的强大，这里只介绍了它的一小部分内容，让大家对正则表达式的概念和使用有一个清晰的了解。

> 示例代码：https://github.com/JustDoPython/python-100-day/tree/master/day-063

**系列文章**

**[第62天：HTTP 入门](http://mp.weixin.qq.com/s?__biz=MzU1NDk2MzQyNg==&mid=2247484058&idx=1&sn=57e9525fe40a83de9c0cd29809d160b0&chksm=fbdada17ccad53017f73d69b4f031f7b1d7adca993f93b332ec8f4708434b9b7ae70a55d151b&scene=21#wechat_redirect)**

**[第61天：Python Requests 库高级用法](http://mp.weixin.qq.com/s?__biz=MzU1NDk2MzQyNg==&mid=2247484049&idx=1&sn=c260f993dab358370904531a9fffb010&chksm=fbdada1cccad530acf3a2cba5de5fcd3543670d1576ed957c7e47ac2c7178a0d24b830a90490&scene=21#wechat_redirect)**

**[从 0 学习 Python 0 - 60 大合集总结](http://mp.weixin.qq.com/s?__biz=MzU1NDk2MzQyNg==&mid=2247484049&idx=2&sn=26f28abcdefd030f2fc294f9cca9d140&chksm=fbdada1cccad530a4b619aa4cc2ea75886d02aa0b2d244029e2ac2cffd67e284ea13494c0ed8&scene=21#wechat_redirect)**

**PS：**公号内回复 ：Python，即可进入Python 新手学习交流群，一起**[100天计划！](http://mp.weixin.qq.com/s?__biz=MzU1NDk2MzQyNg==&mid=2247483671&idx=1&sn=2dc45e9363f86a6938b0c30da0b2a0ba&chksm=fbdad99accad508c083bfa72007b30d6a13a22b4a3c035c4c38bd7c9bb7da46aa42d93c5e14d&scene=21#wechat_redirect)**

\-END-  

**Python 技术  
**

****关于 Python 都在这里****

  

![图片](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

本文转自 <https://mp.weixin.qq.com/s?__biz=MzkxNDI3NjcwMw==&mid=2247493369&idx=1&sn=b2591d7d1dd78f1404a1c99297b98315&chksm=c1724ec9f605c7df148d831ccc01d3ca97b6119509ea8cf973dcaeb6c25b02e74d2e4e726e31&scene=21#wechat_redirect>，如有侵权，请联系删除。